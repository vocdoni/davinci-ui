# fast, small, works great with pnpm
FROM node:22-alpine

# optional but helps some native deps & glibc shims
RUN apk add --no-cache libc6-compat git

# use the exact pnpm you declared
RUN corepack enable && corepack prepare pnpm@10.12.1 --activate

WORKDIR /app

# install deps first (better caching)
COPY package.json pnpm-lock.yaml ./
RUN pnpm install --frozen-lockfile

# (we'll mount the source at runtime)
EXPOSE 5173

# run vite on 0.0.0.0 so the host can reach it
CMD ["pnpm","dev","--host","0.0.0.0","--strictPort"]
